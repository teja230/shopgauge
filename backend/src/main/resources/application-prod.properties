# Production Profile Configuration
# This profile is used for production environment

# CORS Configuration for Production
# Strict CORS policy for production domains
cors.allowed-origins=https://www.shopgaugeai.com,https://shopgaugeai.com

# Security Configuration for Production
security.rate-limit.enabled=true
security.rate-limit.requests-per-minute=60
security.debug-endpoints.enabled=false

# Production-specific settings
logging.level.com.storesight=WARN
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN

# Production frontend URL
frontend.url=https://www.shopgaugeai.com

# Production Shopify redirect URI
shopify.redirect_uri=https://api.shopgaugeai.com/api/auth/shopify/callback

# Production Database Connection Pool Configuration
# EMERGENCY: Increased pool size to handle production load and prevent exhaustion
spring.datasource.hikari.connection-timeout=45000
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:25}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:5}
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.pool-name=StoresightHikariCP-Prod
spring.datasource.hikari.register-mbeans=true
# Emergency settings for connection pool exhaustion
spring.datasource.hikari.allow-pool-suspension=true
spring.datasource.hikari.initialization-fail-timeout=30000

# PostgreSQL connection properties for better reliability
spring.datasource.hikari.data-source-properties.autoReconnect=true
spring.datasource.hikari.data-source-properties.maxReconnects=3
spring.datasource.hikari.data-source-properties.socketTimeout=30000
spring.datasource.hikari.data-source-properties.connectTimeout=30000
spring.datasource.hikari.data-source-properties.tcpKeepAlive=true

# Production Redis Configuration - Enhanced timeouts and reliability
spring.data.redis.timeout=10s
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=2
spring.data.redis.lettuce.pool.max-wait=2s

# Production Session Configuration - Aligned with business app standards
spring.session.timeout=4h
spring.session.redis.namespace=storesight:prod:sessions
spring.session.redis.flush-mode=on-save

# Transaction timeouts for production stability
spring.transaction.default-timeout=30s

# Disable debug endpoints for production
management.endpoints.enabled-by-default=false
management.endpoints.web.exposure.include=health,info,metrics 